TARGET = calc
SCANNER = scanner
PARSER = parser
OBJS = $(SCANNER).cmo $(PARSER).cmo $(TARGET).cmo

TARGET : $(OBJS)
	ocamlc -o $(TARGET) $(OBJS)

$(SCANNER).ml : $(SCANNER).mll
	ocamllex $(SCANNER).mll

$(PARSER).ml $(PARSER).mli : $(PARSER).mly
	ocamlyacc $(PARSER).mly

%.cmo : %.ml
	ocamlc -c $<

%.cmi : %.mli
	ocamlc -c $<


.PHONY : clean
clean :
	rm -f $(TARGET) $(PARSER).ml $(PARSER).mli $(SCANNER).ml *.cmo *.cmi

# Generated by ocamldep *.ml *.mli
calc.cmo: scanner.cmo parser.cmi ast.cmi
calc.cmx: scanner.cmx parser.cmx ast.cmi
parser.cmo: ast.cmi parser.cmi
parser.cmx: ast.cmi parser.cmi
scanner.cmo: parser.cmi
scanner.cmx: parser.cmx
ast.cmi:
parser.cmi: ast.cmi
